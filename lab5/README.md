# Техническая документация для разработчиков

## 1. Архитектура приложения

Приложение построено на базе фреймворка Qt и состоит из двух основных виджетов:
- ClippingWidget - для отсечения отрезков
- PolygonClippingWidget - для отсечения многоугольников

### 1.1 Основные классы

#### ClippingWidget
Наследуется от QWidget и реализует:
- Отрисовку координатной сетки
- Загрузку данных из файла
- Алгоритм Коэна-Сазерленда для отсечения отрезков

#### PolygonClippingWidget
Наследуется от QWidget и реализует:
- Отрисовку координатной сетки
- Загрузку данных из файла
- Алгоритм Сазерленда-Ходжмана для отсечения многоугольников

## 2. Структуры данных

### 2.1 Основные структуры

```cpp
struct Line {
    QPointF p1, p2;  // Начальная и конечная точки отрезка
};

enum OutCode {
    INSIDE = 0,  // 0000
    LEFT = 1,    // 0001
    RIGHT = 2,   // 0010
    BOTTOM = 4,  // 0100
    TOP = 8      // 1000
};
```

### 2.2 Основные поля классов

```cpp
// ClippingWidget
QVector<Line> lines;     // Массив отрезков
QRectF clipRect;         // Отсекающее окно

// PolygonClippingWidget
QVector<QPointF> polygon;  // Точки многоугольника
QRectF clipRect;          // Отсекающее окно
```

## 3. Алгоритмы

### 3.1 Алгоритм Коэна-Сазерленда

1. Вычисление кодов концов отрезка
2. Тривиальное принятие или отвержение
3. Деление отрезка пополам и рекурсивная проверка

### 3.2 Алгоритм Сазерленда-Ходжмана

1. Последовательное отсечение по каждой стороне окна
2. Определение пересечений
3. Формирование нового многоугольника

## 4. Основные методы

### 4.1 ClippingWidget

```cpp
void paintEvent(QPaintEvent *event);  // Отрисовка
bool cohenSutherlandClip(const Line &line, Line &clippedLine);  // Отсечение
int computeOutCode(float x, float y);  // Вычисление кода точки
void loadFromFile(const QString &fileName);  // Загрузка данных
```

### 4.2 PolygonClippingWidget

```cpp
void paintEvent(QPaintEvent *event);  // Отрисовка
QPolygonF sutherlandHodgmanClip(const QVector<QPointF> &polygon, const QRectF &clipRect);  // Отсечение
QPointF intersect(const QPointF &p1, const QPointF &p2, const QPointF &p3, const QPointF &p4);  // Поиск пересечений
```

## 5. Формат входных данных

### 5.1 Структура файла

```
n               // Количество отрезков/точек многоугольника
x1 y1 x2 y2     // Координаты отрезка или точки многоугольника
...
xmin ymin xmax ymax  // Координаты отсекающего окна
```

### 5.2 Обработка ошибок

- Проверка открытия файла
- Валидация входных данных
- Обработка некорректных координат

## 6. Расширение функциональности

### 6.1 Добавление нового алгоритма отсечения

1. Создать новый класс, наследующий QWidget
2. Реализовать метод paintEvent
3. Реализовать алгоритм отсечения
4. Добавить загрузку данных из файла

### 6.2 Модификация визуализации

1. Настройка цветов в методе paintEvent
2. Изменение размера сетки
3. Добавление новых графических элементов

## 7. Сборка проекта

### 7.1 Требования

- Qt Creator 5.12 или выше
- Компилятор с поддержкой C++11
- qmake или CMake

### 7.2 Процесс сборки

1. Открыть проект в Qt Creator
2. Настроить комплект сборки
3. Выполнить сборку проекта

## 8. Тестирование

### 8.1 Модульное тестирование

- Тестирование алгоритмов отсечения
- Проверка граничных случаев
- Тестирование загрузки данных
